.container-fluid.pad-edge
  %h1.pt-5 
    - if not params[:query].blank? 
      Listing products related to 
      = "'" + @query["query"] + "'"
    - else 
      Product Archive
  %h2
    = page_entries_info products, :model => 'product'

  - if products.size > 0
    %table.table
      %thead
        %tr
          %th Name
          %th Description
          %th Vendor
          %th Mass
          %th Category
          %th Url
          %th Manufacturer
          %th Manufacturer country
          %th Co2 produced
          %th Materials
          %th
          %th
          %th

      %tbody
        - products.each do |product| 
          %tr
            %td= product.name
            %td= product.description
            %td= product.business_name
            %td= product.mass
            %td= product.category
            %td= product.url
            %td= product.manufacturer
            %td= product.manufacturer_country
            %td= product.co2_produced
            %td
              - product.materials.each do |material|
                %br= material.name
                //%td= material[1]
            %td= link_to 'Show', product
            - if can?(:edit, Product)
              %td= link_to 'Edit', edit_product_path(product)
            - if can?(:delete, Product)
              %td= link_to 'Destroy', product, :method => :delete, :data => { :confirm => 'Are you sure?' }

  %br

  .justify-content-center.pagination
    = will_paginate(products, :renderer => WillPaginate::ActionView::Bootstrap4LinkRenderer)


  - if can?(:new, Product)
    = link_to 'New Product', new_product_path
