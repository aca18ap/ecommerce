- content_for :title, "#{@business.name}'s Dashboard"
= include_gon
= additional_javascript('customers')

.container-fluid.pad-edge
  %h1.pt-5= "#{@business.name}'s Dashboard"

.container-fluid.p-0.m-0
  .row.mx-5.my-3.px-lg-5.align-content-around.border-top.border-bottom
    -# = render 'stat_bar_item', elem_id: 'avg-co2', statistic: @customer.mean_co2_per_purchase, statistic_unit: 'Kg', description: 'Avg. CO<sub>2</sub> Per Purchase'.html_safe
    -# = render 'stat_bar_item', elem_id: 'total-co2', statistic: @customer.total_co2_produced, statistic_unit: 'Kg', description: 'Total CO<sub>2</sub> Produced'.html_safe
    -# = render 'stat_bar_item', elem_id: 'co2-saved', statistic: @customer.co2_saved, statistic_unit: 'Kg', description: 'CO<sub>2</sub> Saved'.html_safe
    -# = render 'stat_bar_item', elem_id: 'co2-per-pound', statistic: @customer.co2_per_pound, statistic_unit: 'Kg', description: 'CO<sub>2</sub> Per Â£'.html_safe
    -# = render 'stat_bar_item', elem_id: 'total-purchases', statistic: @customer.products_total, statistic_unit: '', description: 'Total Purchases Logged'.html_safe

  .row.m-3.bg-light-green
    .col-xl-7
      %ul.nav.nav-tabs.mb-2
        %li.active
          = link_to 'Total Product Views', '#total-product-views-tab', { 'data-toggle': 'tab', class: 'btn', id: 'open-total-product-views-tab' }
        %li
          = link_to 'Views By Product', '#product-views-tab', { 'data-toggle': 'tab', class: 'btn', id: 'open-product-views-tab' }
        %li
          = link_to 'Views By Category', '#category-views-tab', { 'data-toggle': 'tab', class: 'btn', id: 'open-category-views-tab' }

      .container-fluid.tab-content
        .container-fluid.tab-pane.active#total-product-views-tab
          %h2.d-inline Total Product Views
          %svg#co2-purchased-graph.d-block.m-auto

        .container-fluid.tab-pane.mb-2#product-views-tab
          %h2.d-inline Views By Product
          %svg#total-co2-graph.d-block.m-auto

        .container-fluid.tab-pane#category-views-tab
          %h2.d-inline Views By Category
          %svg#co2-saved-graph.d-block.m-auto

    .col-xl-5
      %h2.py-2 Affiliate Products
      .container.px-0.mx-0.h-100.overflow-scroll
        = render partial: 'product', collection: @business.products